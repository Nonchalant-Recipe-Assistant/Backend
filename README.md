# üç≥ Nonchalant Recipe Assistant ‚Äî Backend

## üìñ –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞
Nonchalant Recipe Assistant ‚Äî —ç—Ç–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å –ø–æ–º–æ—â—å—é AI.  
Backend —Ä–µ–∞–ª–∏–∑—É–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏ –∏ –∏–∑–±—Ä–∞–Ω–Ω—ã–º, –∞ —Ç–∞–∫–∂–µ —á–∞—Ç-–ø–æ–¥–¥–µ—Ä–∂–∫—É.  

## üõ† –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π
- **Python 3.11**
- **FastAPI** ‚Äî REST API
- **SQLAlchemy ORM**
- **MySQL** ‚Äî –æ—Å–Ω–æ–≤–Ω–∞—è –ë–î
- **Pytest** ‚Äî –º–æ–¥—É–ª—å–Ω—ã–µ —Ç–µ—Å—Ç—ã
- **Logging (logging / Loguru)** ‚Äî –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–µ–π—Å—Ç–≤–∏–π
- **Uvicorn** ‚Äî —Å–µ—Ä–≤–µ—Ä –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üë• –†–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
- **–ì–æ—Å—Ç—å**
  - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è
  - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
- **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
  - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ (—á–µ—Ä–µ–∑ AI API)
  - –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ—Ü–µ–ø—Ç–æ–≤ –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è–º–∏ (–∫—É—Ö–Ω—è, —Å–ª–æ–∂–Ω–æ—Å—Ç—å, –≤—Ä–µ–º—è –≥–æ—Ç–æ–≤–∫–∏)
  - –û–±—â–µ–Ω–∏–µ –≤ —á–∞—Ç–µ –ø–æ–¥–¥–µ—Ä–∂–∫–∏
- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä**
  - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∏ –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏ —Å–∏—Å—Ç–µ–º—ã
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —á–µ—Ä–µ–∑ —á–∞—Ç
  <img width="652" height="688" alt="image" src="https://github.com/user-attachments/assets/6df85739-ad3d-4b4f-ac0e-6c25d05f4fe4" />


**–û—Å–Ω–æ–≤–Ω—ã–µ —Ç–∞–±–ª–∏—Ü—ã:**
1. `roles` ‚Äî —Ä–æ–ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
2. `users` ‚Äî —É—á–µ—Ç–Ω—ã–µ –∑–∞–ø–∏—Å–∏  
3. `sessions` ‚Äî —Å–µ—Å—Å–∏–∏ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏  
4. `user_preferences` ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
5. `favorites` ‚Äî –∏–∑–±—Ä–∞–Ω–Ω—ã–µ —Ä–µ—Ü–µ–ø—Ç—ã (–ø–æ —Ö—ç—à—É/–∏–¥–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ç–æ—Ä—É)  
6. `chat_sessions` ‚Äî —Å–µ—Å—Å–∏–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∏  
7. `chat_messages` ‚Äî —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç–µ  
8. `logs` ‚Äî –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  

<img width="616" height="828" alt="image" src="https://github.com/user-attachments/assets/865a74f5-cc26-4c10-a823-52d6ec301e45" />


## üì° API (–æ—Å–Ω–æ–≤–Ω—ã–µ endpoints)

### üë§ Users
- `POST /users/` ‚Äî —Å–æ–∑–¥–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `GET /users/` ‚Äî —Å–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π  
- `GET /users/{id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `PUT /users/{id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  
- `DELETE /users/{id}` ‚Äî —É–¥–∞–ª–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è  

### ‚≠ê Favorites
- `POST /favorites/` ‚Äî –¥–æ–±–∞–≤–∏—Ç—å —Ä–µ—Ü–µ–ø—Ç –≤ –∏–∑–±—Ä–∞–Ω–Ω–æ–µ  
- `GET /favorites/` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –∏–∑–±—Ä–∞–Ω–Ω–æ–≥–æ  

### ‚öôÔ∏è Preferences
- `GET /preferences/{user_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è  
- `PUT /preferences/{user_id}` ‚Äî –æ–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥–ø–æ—á—Ç–µ–Ω–∏—è  

### üí¨ Chat
- `POST /chat/sessions/` ‚Äî –Ω–∞—á–∞—Ç—å —á–∞—Ç-—Å–µ—Å—Å–∏—é  
- `POST /chat/messages/` ‚Äî –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏–µ  
- `GET /chat/messages/{session_id}` ‚Äî –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

### üîç API –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤—ã–π –ø–æ–∏—Å–∫ –¥–∞–Ω–Ω—ã—Ö (—Ä–µ—Ü–µ–ø—Ç–æ–≤) —Å –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å—é —Å–ª–æ–∂–Ω–æ–π —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –∏ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏.

**Endpoint:** `GET /search/data`

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∑–∞–ø—Ä–æ—Å–∞:**
*   `q` (string, optional): –°—Ç—Ä–æ–∫–∞ –ø–æ–ª–Ω–æ—Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –ø–æ–∏—Å–∫–∞. –ò—â–µ—Ç —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (case-insensitive) –≤ –ø–æ–ª—è—Ö `title` –∏ `description`.
*   `date_from` (date, YYYY-MM-DD): –§–∏–ª—å—Ç—Ä. –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø–∏—Å–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ *–ø–æ—Å–ª–µ* —ç—Ç–æ–π –¥–∞—Ç—ã.
*   `date_to` (date, YYYY-MM-DD): –§–∏–ª—å—Ç—Ä. –ü–æ–∫–∞–∑–∞—Ç—å –∑–∞–ø–∏—Å–∏, —Å–æ–∑–¥–∞–Ω–Ω—ã–µ *–¥–æ* —ç—Ç–æ–π –¥–∞—Ç—ã.
*   `category` (string): –§–∏–ª—å—Ç—Ä –ø–æ –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ (–Ω–∞–ø—Ä–∏–º–µ—Ä, "Italian", "Vegan").
*   `sort_by` (string): –ü–æ–ª–µ –¥–ª—è —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `created_at` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `title`.
*   `sort_order` (string): –ù–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Ä—Ç–∏—Ä–æ–≤–∫–∏. –í–æ–∑–º–æ–∂–Ω—ã–µ –∑–Ω–∞—á–µ–Ω–∏—è: `desc` (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é), `asc`.
*   `page` (int): –ù–æ–º–µ—Ä —Å—Ç—Ä–∞–Ω–∏—Ü—ã (–ø–∞–≥–∏–Ω–∞—Ü–∏—è).
*   `limit` (int): –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –∑–∞–ø–∏—Å–µ–π –Ω–∞ —Å—Ç—Ä–∞–Ω–∏—Ü–µ.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
GET http://localhost:8080/search/data?q=Pasta&category=Italian&sort_by=created_at&sort_order=desc

### üõ† Admin
- `GET /logs/` ‚Äî –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –∂—É—Ä–Ω–∞–ª –¥–µ–π—Å—Ç–≤–∏–π
- 


## üîê API Reference (Role Based)

### üë§ Guest (–ù–µ–∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
–î–æ—Å—Ç—É–ø–µ–Ω —Ç–æ–ª—å–∫–æ –ø—Ä–æ—Å–º–æ—Ç—Ä –æ–±—â–µ–¥–æ—Å—Ç—É–ø–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –∏ –ø–æ–∏—Å–∫.
- `POST /auth/login` - –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É.
- `POST /auth/register` - –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è.
- `GET /search/data` - –ü–æ–∏—Å–∫ —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π (–ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é, –¥–∞—Ç–µ, –∫–∞—Ç–µ–≥–æ—Ä–∏–∏).

### üü¢ User (–ê–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å)
–ò–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø –∫ –ª–∏—á–Ω–æ–º—É –ø—Ä–æ—Ñ–∏–ª—é, —á–∞—Ç—É –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –≥—Ä—É–ø–ø–∞–º–∏.
- `GET /auth/me` - –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ—Ñ–∏–ª—è.
- `POST /groups` - –°–æ–∑–¥–∞–Ω–∏–µ –≥—Ä—É–ø–ø—ã.
- `POST /groups/join` - –í—Å—Ç—É–ø–ª–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø—É –ø–æ –∫–æ–¥—É.
- `POST /chat/send` - –û—Ç–ø—Ä–∞–≤–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏–π.

### üõ°Ô∏è Admin / Moderator
–ò–º–µ–µ—Ç —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∞ (–∑–∞–ª–æ–∂–µ–Ω–æ –≤ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–µ –ë–î —á–µ—Ä–µ–∑ —Ç–∞–±–ª–∏—Ü—É `roles`).
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ (—Ä–µ–∞–ª–∏–∑—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ –ø—Ä–æ–≤–µ—Ä–∫—É `user.role_id`).
